---
- hosts: localhost

  tasks:
    - name: Create kioskReactor dir if not exists
      command: "mkdir -p /cygdrive/c/kioskReactor"

    - name: get files in kioskReactor folder
      command: "ls /cygdrive/c/kioskReactor"
      register: files_in_kioskReactor

    - name: Copy script file launchSystemWin.sh
      command: "cp launchSystemWin.sh /cygdrive/c/kioskReactor"
      when: files_in_kioskReactor.stdout.find('launchSystemWin.sh') == -1

    - name: Copy script file killSystemWin.sh
      command: "cp killSystemWin.sh /cygdrive/c/kioskReactor"
      when: files_in_kioskReactor.stdout.find('killSystemWin.sh') == -1

    - name: Copy script file update.sh
      command: "cp update.sh /cygdrive/c/kioskReactor"
      when: files_in_kioskReactor.stdout.find('update.sh') == -1

    - name: Copy script file installNPM.bat
      command: "cp installNPM.bat /cygdrive/c/kioskReactor"
      when: files_in_kioskReactor.stdout.find('installNPM.bat') == -1

    - name: rsync programs file
      command: "rsync -avz ./programs /cygdrive/c/kioskReactor"

    - name: Create kioskReactor conf dir if not exists
      command: "mkdir -p /cygdrive/c/kioskReactor/conf"

    - name: rsync conf file
      command: "rsync --ignore-existing -avz ./confWin/ /cygdrive/c/kioskReactor/conf/"
      when: files_in_kioskReactor.stdout.find('conf') == -1

    - name: rsync conf file
      command: "installNPM.bat"
